<app-test>
  <div class="profile-card">
    <div class="profile-header" style="border-bottom: 1px solid rgba(255,255,255,.1);">
      <section class="profile-main">
        <div class="profile-user-profile" style="gap:1.5rem; align-items:center;">
          <div class="user-info large" style="gap:.25rem;">
            <h2 class="user-name" style="font-size:2.5rem;font-weight:700;color:#d7dbee">
              Editar nombre del viaje
            </h2>
            <p class="user-status" style="font-size:1.25rem;color:#5f647e">
              Solo se edita el nombre. El resto queda en solo lectura.
            </p>
          </div>
        </div>
      </section>
    </div>

    <!-- IMPORTANTE: el form debe existir con este nombre -->
    <form [formGroup]="form" (ngSubmit)="save()" novalidate>
      <div class="form-grid">
        <!-- ÚNICO campo editable -->
        <div>
          <label for="nombreViaje">Nombre de Viaje</label>
          <input id="nombreViaje"
                 type="text"
                 formControlName="name"
                 placeholder="Nombre del viaje"
                 [class.input-invalid]="submitted && f['name']?.invalid"/>
        </div>

        <!-- Solo lectura (fuera del form o con readonly/disabled) -->
        <div>
          <label for="tipoDeViaje">Tipo de viaje</label>
          <input id="tipoDeViaje" type="text" [value]="trip?.type || ''" readonly disabled />
        </div>

        <div>
          <label for="desde">Desde</label>
          <input id="desde" type="date" [value]="trip?.startDate?.substring(0,10) || ''" readonly disabled />
        </div>

        <div>
          <label for="hasta">Hasta</label>
          <input id="hasta" type="date" [value]="trip?.endDate?.substring(0,10) || ''" readonly disabled />
        </div>

        <div id="form__grid-aboutme">
          <label for="about">Descripción de viaje</label>
          <textarea id="about" rows="4" [value]="trip?.description || ''" readonly disabled></textarea>
        </div>

        <div style="grid-column:1/3;margin-top:1rem;">
          <button type="submit" class="edit-btn" style="width:auto;" [disabled]="loading">Guardar nombre</button>
          <a class="filters-btn" style="margin-left:12px;" routerLink="/tripList">Volver</a>
        </div>
      </div>
    </form>

    <div *ngIf="submitted && msgError" class="alert error">{{ msgError }}</div>
    <div *ngIf="submitted && msgOk" class="alert ok">{{ msgOk }}</div>
  </div>
</app-test>
