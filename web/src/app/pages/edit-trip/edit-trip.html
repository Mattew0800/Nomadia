<app-test>
  <div class="profile-card">
    <div class="profile-header" style="border-bottom: 1px solid rgba(255,255,255,.1);">
      <section class="profile-main">
        <div class="profile-user-profile" style="gap:1.5rem; align-items:center;">
          <div class="trip-icon-wrapper">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="#bef264" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="10" r="3" stroke="#bef264" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="user-info large" style="gap:.25rem;">
            <h2 class="user-name" style="font-size:2.5rem;font-weight:700;color:#d7dbee">
              Editar viaje
            </h2>
            <p class="user-status" style="font-size:1.25rem;color:#5f647e">
              Modifica el nombre del viaje
            </p>
          </div>
        </div>
      </section>
    </div>

    <form [formGroup]="form" (ngSubmit)="save()" novalidate>
      <div class="form-grid">
        <div>
          <label for="nombreViaje">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display:inline-block; vertical-align:middle; margin-right:6px;">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="#bef264" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="10" r="3" stroke="#bef264" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Nombre de Viaje
          </label>
          <input id="nombreViaje"
                 type="text"
                 formControlName="name"
                 placeholder="Ej: Vacaciones en Bariloche"
                 [ngClass]="{'input-invalid': submitted && f['name']?.invalid}"/>
          @if(submitted && f['name']?.invalid){
            <p class="formError">El nombre del viaje es obligatorio.</p>
          }
        </div>

        <div>
          <label for="tipoDeViaje">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display:inline-block; vertical-align:middle; margin-right:6px;">
              <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Tipo de viaje
          </label>
          <input id="tipoDeViaje" type="text" [value]="trip?.type || ''" readonly disabled />
        </div>

        <div>
          <label for="desde">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display:inline-block; vertical-align:middle; margin-right:6px;">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="16" y1="2" x2="16" y2="6" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="8" y1="2" x2="8" y2="6" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="3" y1="10" x2="21" y2="10" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Fecha de inicio
          </label>
          <input id="desde" type="date" [value]="trip?.startDate?.substring(0,10) || ''" readonly disabled />
        </div>

        <div>
          <label for="hasta">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display:inline-block; vertical-align:middle; margin-right:6px;">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="16" y1="2" x2="16" y2="6" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="8" y1="2" x2="8" y2="6" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="3" y1="10" x2="21" y2="10" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Fecha de fin
          </label>
          <input id="hasta" type="date" [value]="trip?.endDate?.substring(0,10) || ''" readonly disabled />
        </div>

        <div id="form__grid-aboutme">
          <label for="about">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display:inline-block; vertical-align:middle; margin-right:6px;">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <polyline points="14,2 14,8 20,8" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="16" y1="13" x2="8" y2="13" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="16" y1="17" x2="8" y2="17" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Descripción del viaje
          </label>
          <textarea id="about" rows="4" [value]="trip?.description || ''" readonly disabled placeholder="Sin descripción"></textarea>
        </div>

        <div style="grid-column:1/3;margin-top:1rem;display:flex;gap:12px;align-items:center;">
          <button type="submit" class="edit-btn" [disabled]="loading">Guardar cambios</button>
          <button class="filters-btn" type="button" routerLink="/tripList">Volver</button>
        </div>
      </div>
    </form>

    @if(submitted && msgError){
      <div class="alert error">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="display:inline-block;vertical-align:middle;margin-right:8px;">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
          <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        {{ msgError }}
      </div>
    }
    @if(submitted && msgOk){
      <div class="alert ok">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="display:inline-block;vertical-align:middle;margin-right:8px;">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <polyline points="22 4 12 14.01 9 11.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        {{ msgOk }}
      </div>
    }
  </div>
</app-test>
