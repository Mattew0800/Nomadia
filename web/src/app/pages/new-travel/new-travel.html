<app-test>
  <div class="profile-card" *ngIf="currentStep === 0">
    <div class="profile-header">
        <section class="profile-main">
            <div class="profile-user-profile step-0-header">
                <div class="user-info large">
                    <h2 class="user-name step-0-title">Seleccionar Tipo de Viaje</h2>
                    <p class="user-status step-0-subtitle">¿Cuál es el foco principal de tu viaje?</p>
                </div>
            </div>
        </section>
    </div>

    <div class="selection-grid">
        <button
            *ngFor="let tripType of tripTypesWithIcons"
            (click)="selectTripType(tripType.value)"
            class="type-selection-btn"
        >
            <span class="trip-icon">{{ tripType.icon }}</span>
            <span class="trip-label">{{ tripType.label }}</span>
        </button>
    </div>
</div>

  <div class="profile-card" *ngIf="currentStep === 1" [ngClass]="tripTypeClass">
    <div class="profile-header" style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
      <section class="profile-main">
        <div class="profile-user-profile" style="gap:1.5rem; align-items:center;">
          <div class="user-info large" style="gap:0.25rem;">
            <h2 class="user-name" style="font-size: 2.5rem; font-weight: 700; color: #d7dbee;">Crear Nuevo Viaje</h2>
            <p class="user-status" style="font-size: 1.25rem; color: #5f647e;">Ingresá los detalles de tu próxima aventura</p>
          </div>
        </div>
      </section>
    </div>

    <form [formGroup]="form" (ngSubmit)="save()" novalidate>
      <div class="form-grid">

        <div>
          <label for="nombreViaje">Nombre de Viaje</label>
          <input
            id="nombreViaje"
            type="text"
            formControlName="name"
            placeholder="Ej: Vacaciones en Bariloche"
            [class.input-invalid]="f['name'].touched && f['name'].invalid"
          />
          <div class="formError" *ngIf="f['name'].touched && f['name'].hasError('required')">
            El nombre del viaje es obligatorio
          </div>
          <div class="formError" *ngIf="f['name'].touched && f['name'].hasError('minlength')">
            El nombre debe tener al menos 3 caracteres
          </div>
        </div>

        <div>
          <label for="tipoDeViaje">Tipo de viaje</label>
          <div class="type-input-container">
            <input
              id="tipoDeViaje"
              class="tipoDeViaje"
              type="text"
              [value]="tripTypeLabel"
              readonly
              [class.input-invalid]="f['type'].touched && f['type'].invalid"
            />
            <button type="button" class="type-btn" (click)="goToStep(0)">Modificar Tipo</button>
          </div>
          <div class="formError" *ngIf="f['type'].touched && f['type'].hasError('required')">
            Debes seleccionar un tipo de viaje
          </div>
        </div>

        <div>
          <label for="desde">Fecha de Inicio</label>
          <input
            id="desde"
            type="date"
            formControlName="startDate"
            [class.input-invalid]="f['startDate'].touched && f['startDate'].invalid"
          />
          <div class="formError" *ngIf="f['startDate'].touched && f['startDate'].hasError('required')">
            La fecha de inicio es obligatoria
          </div>
          <div class="formError" *ngIf="f['startDate'].touched && f['startDate'].hasError('pastDate')">
            La fecha de inicio debe ser hoy o futura
          </div>
        </div>

        <div>
          <label for="hasta">Fecha de Fin</label>
          <input
            id="hasta"
            type="date"
            formControlName="endDate"
            [class.input-invalid]="(f['endDate'].touched && f['endDate'].invalid) || (f['endDate'].touched && form.hasError('dateRange'))"
          />
          <div class="formError" *ngIf="f['endDate'].touched && f['endDate'].hasError('required')">
            La fecha de fin es obligatoria
          </div>
          <div class="formError" *ngIf="f['endDate'].touched && form.hasError('dateRange')">
            La fecha de fin debe ser posterior a la fecha de inicio
          </div>
        </div>

        <div id="form__grid-aboutme">
          <label for="about">Descripción de viaje</label>
          <textarea
            id="about"
            formControlName="description"
            rows="4"
            placeholder="Contanos sobre tu viaje, lugares que visitarás, actividades planeadas..."
            [class.input-invalid]="f['description'].touched && f['description'].invalid"
          ></textarea>
          <div class="formError" *ngIf="f['description'].touched && f['description'].hasError('required')">
            La descripción es obligatoria
          </div>
          <div class="formError" *ngIf="f['description'].touched && f['description'].hasError('maxlength')">
            La descripción no puede superar los 100 caracteres
          </div>
        </div>

        <div style="grid-column: 1/3; margin-top:1rem;">
          <button type="submit" class="edit-btn">Cargar Viaje</button>
        </div>

      </div>
    </form>

    <div *ngIf="msgError" class="alert error" id="tripError">{{ msgError }}</div>
    <div *ngIf="msgOk" class="alert ok">{{ msgOk }}</div>

  </div>
</app-test>
